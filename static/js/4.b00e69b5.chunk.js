(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{300:function(e,t,s){e.exports={profileInfo:"ProfileInfo_profileInfo__2GpXQ",descriptionBlock:"ProfileInfo_descriptionBlock__B_MVT",userName:"ProfileInfo_userName__2EWdc",photoUserField:"ProfileInfo_photoUserField__2-xIv",photoUser:"ProfileInfo_photoUser__20LnI",changePhoto:"ProfileInfo_changePhoto__2z56q",aboutUser:"ProfileInfo_aboutUser__2gw2h",fieldStatus:"ProfileInfo_fieldStatus__2V4j4",inputStatus:"ProfileInfo_inputStatus__1WVUN",statusWrapped:"ProfileInfo_statusWrapped__1ENo-",textStatus:"ProfileInfo_textStatus__3wJnS","scroll-left":"ProfileInfo_scroll-left__2mXZN",statusForm:"ProfileInfo_statusForm__3MVNw",error:"ProfileInfo_error__HNzBh"}},307:function(e,t,s){e.exports={postsBlock:"MyPosts_postsBlock__35GIG",posts:"MyPosts_posts__2EkbX",addPostField:"MyPosts_addPostField__1Dke4",isNotPosts:"MyPosts_isNotPosts__1cEuu",postsField:"MyPosts_postsField__1KSUr",notPostsField:"MyPosts_notPostsField__2Us_a",inputsField:"MyPosts_inputsField__2CDyi",submitButton:"MyPosts_submitButton__7YQVq"}},308:function(e,t,s){e.exports={item:"Post_item__1ReU8",authorField:"Post_authorField__Wi4lg",postAuthor:"Post_postAuthor__2_wGK",photoUser:"Post_photoUser__2BorF",deleteIcon:"Post_deleteIcon__2kFok",postMessage:"Post_postMessage__3G64y",postLike:"Post_postLike__3bY9T",postPhoto:"Post_postPhoto__gwgHk",likesCount:"Post_likesCount__26PlI"}},309:function(e,t,s){e.exports={classForProfileInfo:"Profile_classForProfileInfo__3yPKH",postsField:"Profile_postsField__fROIp"}},311:function(e,t,s){"use strict";s.r(t);var o=s(3),i=s(31),a=s(32),r=s(34),n=s(33),c=s(1),l=s.n(c),d=s(12),u=s(7),p=s(11),j=s(101),h=s(41),b=s(99),f=s(43),O=s(307),m=s.n(O),x=s(308),P=s.n(x),_=s(62),v=s.p+"static/media/notLiked.b4db63fd.png",g=s.p+"static/media/liked.4dabba7b.png",I=s.p+"static/media/deleteIcon.cc77b84b.png",k=s(0),N=function(e){return Object(k.jsxs)("div",{className:P.a.item,children:[Object(k.jsxs)("div",{className:P.a.authorField,children:[Object(k.jsx)("div",{className:P.a.photoUser,children:Object(k.jsx)("img",{src:e.userPhoto?e.userPhoto:_.a})}),Object(k.jsx)("div",{className:P.a.postAuthor,children:e.userLogin}),Object(k.jsx)("div",{onClick:function(){return t=e.postId,void e.deletePost(t);var t},className:P.a.deleteIcon,children:Object(k.jsx)("img",{src:I})})]}),e.message&&Object(k.jsx)("div",{className:P.a.postMessage,children:e.message}),e.photoURL&&Object(k.jsx)("div",{className:P.a.postPhoto,children:Object(k.jsx)("img",{src:e.photoURL})}),Object(k.jsxs)("div",{className:P.a.postLike,children:[Object(k.jsx)("div",{children:Object(k.jsx)("img",{src:e.isMyLike?g:v,onClick:function(){return t=e.postId,void e.addLike(t);var t}})}),Object(k.jsx)("div",{className:P.a.likesCount,children:e.quantityLikes})]})]})},F=s(38),y=s(132),S=s(133),M=s(63),U=s(52),w=(Object(M.a)(100),Object(S.a)({form:"ProfileNewPostReduxForm",validate:function(e){var t={};return e.newPostText||e.photo||(t.newPostText="This field is empty"),t}})((function(e){return Object(k.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(k.jsxs)("div",{className:m.a.inputsField,children:[Object(k.jsx)(y.a,{component:U.c,name:"newPostText",placeholder:"Input text"}),Object(k.jsx)(y.a,{name:"photo",type:"file",component:U.b})]}),Object(k.jsx)("div",{className:m.a.submitButton,children:Object(k.jsx)("button",{children:"Add post"})})]})}))),L=function(e){var t=e.profileId&&e.profileId.userId,s=Object(f.a)(e.posts).reverse().filter((function(e){return e.postOnIdProfile===t})).map((function(t){return Object(k.jsx)(N,{message:t.message,quantityLikes:t.likesCount,photoURL:t.photoURL,userId:t.userId,userLogin:t.userLogin,userPhoto:t.userPhoto,postId:t.id,addLike:e.addLike,isMyLike:t.isMyLike,deletePost:e.deletePost},t.id)})),o=Object(f.a)(e.posts).reverse().filter((function(e){return e.postOnIdProfile===t}));return Object(k.jsxs)("div",{className:m.a.postsBlock,children:[Object(k.jsxs)("div",{className:0===o.length?m.a.isNotPosts:m.a.addPostField,children:[Object(k.jsx)("h3",{children:"Add post"}),Object(k.jsx)(w,{onSubmit:function(s,o){var i=s.newPostText,a=s.photo;document.getElementById("loadingPhoto").style.backgroundColor="",o(Object(F.a)("ProfileNewPostReduxForm")),e.addPost(t,e.auth.userId,e.auth.login,e.auth.photoUser,i,a&&URL.createObjectURL(a))}})]}),Object(k.jsxs)("div",{className:0===o.length?m.a.notPostsField:m.a.postsField,children:[Object(k.jsx)("h2",{children:"Posts"}),Object(k.jsx)("div",{className:m.a.posts,children:s})]})]})},B=Object(d.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,auth:e.auth,profileId:e.profilePage.profile}}),{addPost:j.b,addLike:j.a,deletePost:j.d})(L),A=s(309),C=s.n(A),T=s(102),D=s(300),E=s.n(D),R=s.p+"static/media/changePhoto.98eb835d.png",V=function(e){var t=Object(c.useState)(!1),s=Object(T.a)(t,2),o=s[0],i=s[1],a=Object(c.useState)(e.status),r=Object(T.a)(a,2),n=r[0],l=r[1],d=Object(c.useState)(!1),u=Object(T.a)(d,2),p=u[0],j=u[1],h=Object(c.useState)(),b=Object(T.a)(h,2),f=b[0],O=b[1];Object(c.useEffect)((function(){l(e.status);var t=document.getElementById("fieldStatus")&&document.getElementById("fieldStatus").offsetWidth;j(t>145)}),[e.status]);return Object(k.jsxs)("div",{className:E.a.statusForm,children:["Status",o?Object(k.jsxs)("div",{className:E.a.inputStatus,children:[Object(k.jsx)("div",{className:f&&E.a.error,children:Object(k.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,value:n,onBlur:function(){n.length<100?(O(),i(!1),e.updateStatus(n)):O("Must be 9 characters or less")}})}),f&&Object(k.jsx)("span",{children:f})]}):Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:E.a.fieldStatus,onDoubleClick:e.isOwner&&function(){i(!0)},children:Object(k.jsx)("div",{className:E.a.statusWrapped,children:Object(k.jsx)("span",{id:"fieldStatus",className:p&&E.a.textStatus,children:e.status})})})})]})},J=function(e){var t=e.contactTitle,s=e.contactValue,o=e.editMode,i=e.name;return Object(k.jsx)("div",{children:o?Object(k.jsxs)("div",{children:[t,": ",Object(k.jsx)(y.a,{placeholder:t,name:i,component:"input"})]}):s&&Object(k.jsxs)("div",{children:[t,": ",s]})})},W=Object(S.a)({form:"editProfile"})((function(e){var t=e.profile,s=e.handleSubmit,o=e.editMode,i=e.error;return Object(k.jsxs)("form",{onSubmit:s,children:[Object(k.jsxs)("div",{children:["Full name: ",Object(k.jsx)(y.a,{placeholder:"Full name",name:"fullName",component:"input"})]}),Object(k.jsxs)("div",{children:["About Me: ",Object(k.jsx)(y.a,{placeholder:"About me",name:"aboutMe",component:"textarea"})]}),Object(k.jsxs)("div",{children:["Looking for a job: ",Object(k.jsx)(y.a,{name:"lookingForAJob",component:"input",type:"checkbox"})]}),Object(k.jsxs)("div",{children:["My professional skills: ",Object(k.jsx)(y.a,{placeholder:"My professional skills",name:"lookingForAJobDescription",component:"textarea"})]}),Object(k.jsxs)("div",{children:["Contacts: ",Object.keys(t.contacts).map((function(e){return Object(k.jsx)(J,{error:i,contactTitle:e,contactValue:t.contacts[e],editMode:o,name:"contacts."+e},e)}))]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("button",{children:"Save"}),i&&Object(k.jsx)("div",{children:i})]})]})})),z=function(e){return Object(k.jsx)(W,Object(o.a)({onSubmit:function(t){e.saveProfile(t).then((function(){e.exitOfEditMode()}))}},e))},G=function(e){var t=e.profile,s=e.isOwner,o=e.goToEditMode,i=e.editMode;return Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{children:s&&Object(k.jsx)("button",{onClick:o,children:"Edit"})}),Object(k.jsxs)("div",{children:["About Me: ",t.aboutMe]}),Object(k.jsxs)("div",{children:["Looking for a job: ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(k.jsxs)("div",{children:["My professional skills:",t.lookingForAJobDescription]}),Object(k.jsxs)("div",{children:["Contacts: ",Object.keys(t.contacts).map((function(e){return Object(k.jsx)(J,{contactTitle:e,contactValue:t.contacts[e],editMode:i},e)}))]})]})},q=function(e){var t=e.profile,s=e.status,o=e.updateStatus,i=e.isOwner,a=e.savePhoto,r=e.saveProfile,n=Object(c.useState)(!1),l=Object(T.a)(n,2),d=l[0],u=l[1];return Object(k.jsxs)("div",{className:E.a.profileInfo,children:[Object(k.jsxs)("div",{className:E.a.descriptionBlock,children:[Object(k.jsxs)("div",{className:E.a.photoUserField,children:[Object(k.jsx)("img",{src:null!==t.photos.large?t.photos.large:_.a,className:E.a.photoUser}),i&&Object(k.jsxs)("div",{className:E.a.changePhoto,children:[Object(k.jsx)("label",{htmlFor:"newPhoto",children:Object(k.jsx)("img",{src:R})}),Object(k.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&a(e.target.files[0])},id:"newPhoto"})]})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:E.a.userName,children:t.fullName}),Object(k.jsx)(V,{status:s,updateStatus:o,isOwner:i})]})]}),Object(k.jsx)("div",{className:E.a.aboutUser,children:d?Object(k.jsx)(z,{profile:t,exitOfEditMode:function(){u(!1)},saveProfile:r,editMode:d,initialValues:t}):Object(k.jsx)(G,{profile:t,isOwner:i,goToEditMode:function(){u(!0)},editMode:d})})]})},H=function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"profilePage",children:Object(k.jsx)(q,{profile:e.profile,className:C.a.classForProfileInfo,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile})}),Object(k.jsx)("div",{className:C.a.postsField,children:Object(k.jsx)(B,{})})]})},K=function(e){Object(r.a)(s,e);var t=Object(n.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userID;e||(e=this.props.authorizedUserId),this.props.match.params.userID=e,this.props.user(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userID!==e.match.params.userID&&this.refreshProfile()}},{key:"render",value:function(){return!this.props.profile||this.props.profile&&this.props.match.params.userID!=this.props.profile.userId?Object(k.jsx)(h.a,{}):Object(k.jsx)("div",{children:Object(k.jsx)(H,Object(o.a)(Object(o.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:this.props.match.params.userID===this.props.authorizedUserId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))})}}]),s}(l.a.Component);t.default=Object(p.d)(Object(d.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{user:j.i,getStatus:j.e,updateStatus:j.h,savePhoto:j.f,saveProfile:j.g}),u.g,b.a)(K)}}]);
//# sourceMappingURL=4.b00e69b5.chunk.js.map