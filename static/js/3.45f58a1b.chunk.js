(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{298:function(e,t,s){e.exports={areaMessages:"Message_areaMessages__11acy",messageText:"Message_messageText__wrTTW"}},301:function(e,t,s){e.exports={dialog:"DialogItem_dialog__wThHb",activeLink:"DialogItem_activeLink__244P5",avaDialogs:"DialogItem_avaDialogs__1fb9u",UserName:"DialogItem_UserName__1SDgT"}},302:function(e,t,s){e.exports={dialogItems:"Dialogs_dialogItems__PvrOR",dialogItemsClosed:"Dialogs_dialogItemsClosed__2_xnd",dialogsElementsWrapped:"Dialogs_dialogsElementsWrapped__kZQFY",messagesField:"Dialogs_messagesField__NlDFy",messagesFieldClosed:"Dialogs_messagesFieldClosed__1teXe",panelUser:"Dialogs_panelUser__A_cYk",iconExit:"Dialogs_iconExit__13yuf",PhotoUser:"Dialogs_PhotoUser__2omjZ",UserName:"Dialogs_UserName__1k77E",options:"Dialogs_options__2m2Nc",point:"Dialogs_point__2z4X1",messages:"Dialogs_messages__aw7jM",addMessage:"Dialogs_addMessage__2jkkI",userField:"Dialogs_userField__1eTnj"}},303:function(e,t,s){e.exports={itemMyMessage:"MyMessage_itemMyMessage__Ee9XK",borderMyMessage:"MyMessage_borderMyMessage__1vmkb",Arrow:"MyMessage_Arrow__zaZ7L"}},304:function(e,t,s){e.exports={itemOtherMessage:"OtherMessage_itemOtherMessage__ZMgfj",borderOtherMessage:"OtherMessage_borderOtherMessage__17Shk",Arrow:"OtherMessage_Arrow__oWJ0E"}},305:function(e,t,s){e.exports={addMessageField:"AddMessage_addMessageField__2D_7s"}},311:function(e,t,s){"use strict";s.r(t);var a=s(33),o=s(34),r=s(37),i=s(35),n=s(1),c=s.n(n),l=s(36),d=s(15),p=s(301),g=s.n(p),h=s(61),m=s(0),u=function(e){return Object(m.jsx)(d.b,{to:"/dialogs/".concat(e.id),activeClassName:g.a.activeLink,children:Object(m.jsxs)("div",{className:g.a.dialog,onClick:function(){e.setCurrentDialog(e.id)},children:[Object(m.jsx)("img",{src:e.photo?e.photo:h.a,className:g.a.avaDialogs}),Object(m.jsx)("div",{className:g.a.UserName,children:e.name})]})})},j=s(302),b=s.n(j),f=s(298),_=s.n(f),O=s(303),v=s.n(O),x=function(e){return Object(m.jsxs)("div",{className:v.a.itemMyMessage,children:[Object(m.jsx)("div",{className:v.a.borderMyMessage,children:Object(m.jsxs)("div",{className:_.a.messageText,children:[e.photo&&Object(m.jsx)("img",{src:e.photo}),Object(m.jsx)("div",{className:_.a.text,children:e.message})]})}),Object(m.jsx)("div",{className:v.a.Arrow})]})},D=s(304),y=s.n(D),M=function(e){return Object(m.jsxs)("div",{className:y.a.itemOtherMessage,children:[Object(m.jsx)("div",{className:y.a.Arrow}),Object(m.jsxs)("div",{className:y.a.borderOtherMessage,children:[e.photo&&Object(m.jsx)("div",{className:_.a.img,children:Object(m.jsx)("img",{src:e.photo})}),e.message&&Object(m.jsx)("div",{className:_.a.messageText,children:e.message})]})]})},N=function(e){var t=e.dialogs.filter((function(t){return t.id===e.currentDialogId}))[0];return t=t&&t.messages.map((function(e){return e.myMessage?Object(m.jsx)(x,{message:e.message,photo:e.photo}):Object(m.jsx)(M,{message:e.message,photo:e.photo})})),Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:_.a.areaMessages,children:t})})},w=s(12),C=s(53),R=s(305),I=s.n(R),S=s(40),T=s(130),E=s(131),P=s(62),B=(s(65),Object(E.a)({form:"dialogAddMessageReduxForm",validate:function(e){var t={};return e.newMessageBody||e.messagePhoto||(t.newMessageBody="This field is empty"),e.newMessageBody&&e.newMessageBody.length>300&&(t.newMessageBody="Must be 300 characters or less"),t}})((function(e){return Object(m.jsx)("form",{onSubmit:e.handleSubmit,children:Object(m.jsxs)("div",{className:I.a.addMessageField,children:[Object(m.jsx)(T.a,{component:P.c,name:"newMessageBody",placeholder:"Input your message"}),Object(m.jsx)(T.a,{name:"messagePhoto",type:"file",component:P.b}),Object(m.jsx)("button",{children:"Add message"})]})})}))),F=function(e){return Object(m.jsx)(B,{onSubmit:function(t,s){var a=t.newMessageBody,o=t.messagePhoto&&URL.createObjectURL(t.messagePhoto);document.getElementById("loadingPhoto").style.backgroundColor="",s(Object(S.a)("dialogAddMessageReduxForm")),e.addMyMessage(a,o),e.setUpdateDate(e.currentDialogId)}})},U=Object(w.b)((function(e,t){return{currentDialogId:t.currentDialogId}}),{addMyMessage:C.b,setUpdateDate:C.f})(F),k=function(e,t){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)};var A="styles_scrollable-div__prSCv";!function(e,t){void 0===t&&(t={});var s=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===s&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".styles_scrollable-div__prSCv {\r\n  max-height: inherit;\r\n  height: inherit;\r\n  overflow-y: auto;\r\n}\r\n");var L=function(e){function t(t){var s=e.call(this,t)||this;return s.bottomRef=Object(n.createRef)(),s.wrapperRef=Object(n.createRef)(),s.handleScroll=s.handleScroll.bind(s),s}return function(e,t){function s(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,e),t.prototype.getSnapshotBeforeUpdate=function(){if(this.wrapperRef.current&&this.bottomRef.current){var e=this.props.viewableDetectionEpsilon;return t.isViewable(this.wrapperRef.current,this.bottomRef.current,e)}return!1},t.prototype.componentDidUpdate=function(e,t,s){var a=this.props,o=a.forceScroll;(0,a.changeDetectionFilter)(e,this.props)&&(o||s)&&this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)},t.prototype.componentDidMount=function(){this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)},t.prototype.scrollParentToChild=function(e,s){var a=this.props.viewableDetectionEpsilon;if(!t.isViewable(e,s,a)){var o=e.getBoundingClientRect(),r=s.getBoundingClientRect().top+e.scrollTop-o.top,i=this.props,n=i.animateScroll,c=i.onScrollComplete;n&&(n(e,r),c())}},t.isViewable=function(e,t,s){s=s||0;var a=e.getBoundingClientRect(),o=t.getBoundingClientRect(),r=o.top>=a.top,i=a.top+e.clientHeight-o.top;return r&&i+s>=0},t.prototype.handleScroll=function(){var e=this.props,s=e.viewableDetectionEpsilon,a=e.onScroll;a&&this.bottomRef.current&&this.wrapperRef.current&&a(t.isViewable(this.wrapperRef.current,this.bottomRef.current,s))},t.prototype.scrollToBottom=function(){this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)},t.prototype.render=function(){var e=this.props,t=e.children,s=e.className,a=A+(s?" "+s:"");return Object(n.createElement)("div",{className:a,ref:this.wrapperRef,onScroll:this.handleScroll},t,Object(n.createElement)("div",{ref:this.bottomRef}))},t.defaultProps={forceScroll:!1,animateScroll:function(e,t){e.scrollBy?e.scrollBy({top:t}):e.scrollTop=t},onScrollComplete:function(){},changeDetectionFilter:function(){return!0},viewableDetectionEpsilon:2,onScroll:function(){}},t}(n.Component),W=s.p+"static/media/Exit.1ae234ff.png",V=function(e){var t=Object(l.a)(e.state.dialogs).reverse().map((function(t){return Object(m.jsx)(u,{name:t.name,id:t.id,photo:t.photo,setCurrentDialog:e.setCurrentDialog},t.id)})),s=e.state.currentDialog;return Object(m.jsx)("div",{className:s.id||0===e.state.dialogs.length?"dialogsPage":"dialogsPageClosed",children:0===e.state.dialogs.length?Object(m.jsx)("div",{className:"pageIsEmpty",children:Object(m.jsx)("div",{children:"Your dialogs is empty"})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:s.id?b.a.dialogItems:b.a.dialogItemsClosed,children:Object(m.jsx)("div",{className:b.a.dialogsElementsWrapped,children:t})}),Object(m.jsxs)("div",{className:s.id?b.a.messagesField:b.a.messagesFieldClosed,children:[Object(m.jsxs)("div",{className:b.a.panelUser,children:[Object(m.jsx)("div",{onClick:e.closeCurrentDialog,className:b.a.iconExit,children:Object(m.jsx)("img",{src:W})}),Object(m.jsx)(d.b,{to:"/profile/".concat(e.state.currentDialog.id),children:Object(m.jsxs)("div",{className:b.a.userField,children:[Object(m.jsx)("img",{src:s.photo?s.photo:h.a,className:b.a.PhotoUser}),Object(m.jsx)("div",{className:b.a.UserName,children:s.name})]})}),Object(m.jsxs)("div",{className:b.a.options,children:[Object(m.jsx)("div",{className:b.a.point}),Object(m.jsx)("div",{className:b.a.point}),Object(m.jsx)("div",{className:b.a.point})]})]}),Object(m.jsx)("div",{className:b.a.messages,children:Object(m.jsx)(L,{forceScroll:!0,scrollToBottom:!0,children:Object(m.jsx)(N,{dialogs:e.state.dialogs,currentDialogId:e.state.currentDialog.id})})}),Object(m.jsx)("div",{className:b.a.addMessage,children:Object(m.jsx)(U,{currentDialogId:e.state.currentDialog.id})})]})]})})},Z=s(98),J=s(11),X=s(6),Y=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.props.state.currentDialog.id?this.props.history.push("/dialogs/".concat(this.props.state.currentDialog.id)):this.props.state.currentDialog.id&&this.props.match.params.dialogId===this.props.state.currentDialog.id||this.props.history.push("/dialogs")}},{key:"componentDidUpdate",value:function(e){!this.props.state.currentDialog.id&&this.props.state.currentDialog.id!==e.state.currentDialog.id||!this.props.state.currentDialog.id&&this.props.match.params.dialogId?this.props.history.push("/dialogs"):this.props.state.currentDialog.id&&this.props.match.params.dialogId&&this.props.match.params.dialogId!==e.match.params.dialogId&&this.props.state.currentDialog.id===e.state.currentDialog.id&&this.props.closeCurrentDialog()}},{key:"render",value:function(){return Object(m.jsx)(V,{state:this.props.state,setCurrentDialog:this.props.setCurrentDialog,closeCurrentDialog:this.props.closeCurrentDialog})}}]),s}(c.a.Component);t.default=Object(J.d)(Object(w.b)((function(e){return{state:e.messagesPage}}),{setCurrentDialog:C.e,closeCurrentDialog:C.c}),Z.a,X.g)(Y)}}]);
//# sourceMappingURL=3.45f58a1b.chunk.js.map